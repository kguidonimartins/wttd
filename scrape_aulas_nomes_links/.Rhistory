html_nodes("a") #%>%
# link_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_nodes("a") %>%
html_attr("href")
url <- "html/Conheça a sua jornada - Welcome to the Django.html"
titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_split("\r\n\r\n") %>%
.[[1]] %>%
str_replace_all("\r\n", "")
# link_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_nodes("a") %>%
html_attr("href")
# link_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_nodes("a") %>%
html_attr("href") %>%
paste0("https://welcometothedjango.com.br", .)
url <- "html/Pausa para um upgrade na sua produtividade - Welcome to the Django.html"
titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_split("\r\n\r\n") %>%
.[[1]] %>%
str_replace_all("\r\n", "")
n_aulas <- length(titulo_aulas)
# link_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_nodes("a") %>%
html_attr("href") %>%
paste0("https://welcometothedjango.com.br", .)
link_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_nodes("a") %>%
html_attr("href") %>%
paste0("https://welcometothedjango.com.br", .)
codigo_aulas <-
rep(
paste0(
codigo_aulas,
formatC(
x = 1:n_aulas,
digits = 1,
flag = 0,
format = "d"
),
":"
)
)
codigo_aulas <-
rep(
paste0(
codigo_aulas,
formatC(
x = 1:n_aulas,
digits = 1,
flag = 0,
format = "d"
),
":"
)
)
codigo_aulas <- "M3A"
codigo_aulas <-
rep(
paste0(
codigo_aulas,
formatC(
x = 1:n_aulas,
digits = 1,
flag = 0,
format = "d"
),
":"
)
)
completo_aulas <- paste(codigo_aulas, titulo_aulas)
completo_aulas_md <-
completo_aulas %>%
replace_non_ascii() %>%
str_remove_all(":") %>%
str_remove_all("!") %>%
str_remove_all("\\?") %>%
str_to_lower() %>%
str_replace_all(" ", "_") %>%
str_replace_all(",", "") %>%
paste0(".md")
completo_aulas_md
for (i in seq_along(completo_aulas_md)) {
if (!file.exists(paste0(caminho_modulo, completo_aulas_md[i]))) {
sink(paste0(caminho_modulo, completo_aulas_md[i]))
cat(paste("#", completo_aulas[i], "-", link_aulas[i]))
sink()
} else {
message(paste0(caminho_modulo, completo_aulas_md[i]), " já existe")
}
}
caminho_modulo <- "../modulo_03/"
for (i in seq_along(completo_aulas_md)) {
if (!file.exists(paste0(caminho_modulo, completo_aulas_md[i]))) {
sink(paste0(caminho_modulo, completo_aulas_md[i]))
cat(paste("#", completo_aulas[i], "-", link_aulas[i]))
sink()
} else {
message(paste0(caminho_modulo, completo_aulas_md[i]), " já existe")
}
}
# ipak function: install and load multiple R packages.
# Check to see if packages are installed.
# Install them if they are not, then load them into the R session.
# Forked from: https://gist.github.com/stevenworthington/3178163
ipak <- function(pkg) {
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg)){
install.packages(new.pkg, dependencies = TRUE)
}
suppressPackageStartupMessages(
expr = sapply(
X = pkg,
FUN = require,
character.only = TRUE
)
)
}
ipak(
c(
"rvest",
"tidyverse",
"pacman",
"fs",
"here"
)
)
pacman::p_load_gh(
"trinker/lexicon",
"trinker/textclean"
)
url <- "html/All input is evil - Welcome to the Django.html"
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_split("\r\n\r\n") %>%
.[[1]] %>%
str_replace_all("\r\n", "")
titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_split("\r\n\r\n") %>%
.[[1]] %>%
str_replace_all("\r\n", "")
n_aulas <- length(titulo_aulas)
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() #%>%
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() #%>%
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:]", "\n")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:]", "")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:]", "\n")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:]", "AAA")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:]", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:].", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:].+", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:].*", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:].*?", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:cntrl:]", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
replace_white()
replace_white()
replace_white
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>% {
gsub(pattern = "\\s+", replacement = "\n")
}
gsub(pattern = "\\s+", replacement = "\n", x = .)
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>% {
gsub(pattern = "\\s+", replacement = "\n", x = .)
}
gsub(pattern = "\\s+", replacement = "", x = .)
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>% {
gsub(pattern = "\\s+", replacement = "", x = .)
}
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("\\s+", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("\\s+?", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("\\s.+", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("\\s.", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("\\s+", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("\\s", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_remove_all("[:control:]")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "3")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n")
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") #%>%
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
textclean::drop_empty_row()
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
textclean::drop_empty_row()
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
textclean::drop_empty_row(dataframe = .)
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
textclean::drop_empty_row()
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] #%>%
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[. != ""]
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
.[. != ""]
url <- "html/Como não ficar para trás com seu projeto Django - Welcome to the Django.html"
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
.[. != ""]
url <- "html/Pausa para um upgrade na sua produtividade - Welcome to the Django.html"
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
.[. != ""]
url <- "html/All input is evil - Welcome to the Django.html"
# titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
.[. != ""]
url <- "html/Conheça a sua jornada - Welcome to the Django.html"
scrape_and_organize <- function(html, caminho_modulo, codigo_aulas){
url <- html
fs::dir_create(caminho_modulo)
titulo_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_text() %>%
str_replace_all("[:control:]+", "\n") %>%
str_split("\n") %>%
.[[1]] %>%
.[. != ""]
n_aulas <- length(titulo_aulas)
link_aulas <-
url %>%
read_html() %>%
html_nodes("ol") %>%
html_nodes("a") %>%
html_attr("href")
codigo_aulas <-
rep(
paste0(
codigo_aulas,
formatC(
x = 1:n_aulas,
digits = 1,
flag = 0,
format = "d"
),
":"
)
)
completo_aulas <- paste(codigo_aulas, titulo_aulas)
completo_aulas_md <-
completo_aulas %>%
replace_non_ascii() %>%
str_remove_all(":") %>%
str_remove_all("!") %>%
str_remove_all("\\?") %>%
str_to_lower() %>%
str_replace_all(" ", "_") %>%
str_replace_all(",", "") %>%
paste0(".md")
for (i in seq_along(completo_aulas_md)) {
if (!file.exists(paste0(caminho_modulo, completo_aulas_md[i]))) {
sink(paste0(caminho_modulo, completo_aulas_md[i]))
cat(paste("#", completo_aulas[i], "-", link_aulas[i]))
sink()
} else {
message(paste0(caminho_modulo, completo_aulas_md[i]), " já existe")
}
}
}
scrape_and_organize(
html = "html/Pausa para um upgrade na sua produtividade - Welcome to the Django.html",
caminho_modulo = "../modulo_03/",
codigo_aulas = "M3A"
)
scrape_and_organize(
html = "html/All input is evil - Welcome to the Django.html",
caminho_modulo = "../modulo_04/",
codigo_aulas = "M4A"
)
source('~/GoogleDrive2/git-repos/wttd/scrape_aulas_nomes_links/scrape_aulas_nomes_links.R', echo=TRUE)
